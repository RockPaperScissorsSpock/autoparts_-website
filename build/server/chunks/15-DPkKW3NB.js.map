{"version":3,"file":"15-DPkKW3NB.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/product/_slug_/_page.server.js","../../../.svelte-kit/adapter-node/nodes/15.js"],"sourcesContent":["import { s as set_connection } from \"../../../../chunks/legacydb.js\";\nimport { c as cart_body } from \"../../../../chunks/helpers.js\";\nimport { r as redirect } from \"../../../../chunks/index.js\";\nconst actions = {\n  default: async (request) => {\n    const form_data = await request.request.formData();\n    const item_number = form_data.get(\"item\");\n    const item_qty = form_data.get(\"qty\");\n    let current_cart = request.cookies.get(\"cart\");\n    let cart_body$1 = cart_body();\n    if (!(current_cart == null || current_cart == \"\")) {\n      let cookie_cart = JSON.parse(current_cart);\n      cookie_cart.items.forEach((item) => {\n        cart_body$1.items.push(item);\n      });\n    }\n    let found = false;\n    cart_body$1.items.forEach((element) => {\n      if (element.item == item_number) {\n        element.qty = Number(element.qty) + Number(item_qty);\n        found = true;\n      }\n    });\n    if (found == false) {\n      cart_body$1.items.push({ item: item_number, qty: Number(item_qty) });\n    }\n    let cookie_string = JSON.stringify(cart_body$1);\n    console.log(cookie_string);\n    request.cookies.set(\"cart\", cookie_string, { path: \"/\" });\n    redirect(301, \"/cart\");\n  }\n};\nasync function load({ params }) {\n  let connection = await set_connection();\n  try {\n    let results = await connection.query(`SELECT * FROM parts WHERE number = '${params.slug}'`).then(([rows, fields]) => {\n      return rows;\n    });\n    return {\n      product_listing: results[0]\n    };\n  } catch (error) {\n    console.error(\"Unable to perform query!\");\n    console.log(error);\n    return error;\n  }\n}\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/product/_slug_/_page.server.js';\n\nexport const index = 15;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/product/_slug_/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/product/[slug]/+page.server.js\";\nexport const imports = [\"_app/immutable/nodes/15.BiV8sQJJ.js\",\"_app/immutable/chunks/14.NBuK3kfd.js\",\"_app/immutable/chunks/index.BkIfBQf8.js\",\"_app/immutable/chunks/helpers.C7bBOv7j.js\"];\nexport const stylesheets = [];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}